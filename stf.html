<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Web Challenges Story — HTML Slides</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #0b1229;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --primary: #60a5fa;
      --accent: #34d399;
      --warn: #f59e0b;
      --danger: #f87171;
    }
    * { box-sizing: border-box; }
    html,body { height: 100%; }
    body {
      margin: 0; background: linear-gradient(180deg,#0b1022,var(--bg));
      color: var(--text); font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      display: flex; align-items: center; justify-content: center; padding: 2.5vh 2vw;
    }
    .deck { width: min(1100px,96vw); }
    .card {
      background: radial-gradient(1200px 600px at 100% 0%, #0e1b45 0%, var(--panel) 50%);
      border: 1px solid rgba(255,255,255,0.06); border-radius: 22px; padding: 48px 56px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.35); min-height: 68vh; display: flex; flex-direction: column; justify-content: space-between;
    }
    h1 { font-size: clamp(28px,4vw,44px); margin: 0 0 18px; line-height:1.12; letter-spacing:0.2px; }
    .content { font-size: clamp(18px,2.2vw,24px); line-height:1.6; }
    .content p { margin: 0 0 12px; }
    .content ul, .content ol { margin: 10px 0 0 0; padding-left: 26px; }
    .content li { margin: 10px 0; }
    code { background: rgba(255,255,255,0.06); padding: 2px 6px; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:0.9em; }
    pre { background: rgba(255,255,255,0.06); padding: 14px 16px; border-radius:12px; overflow-x:auto; }
    .nav { display:flex; align-items:center; gap:16px; margin-top:26px; }
    .nav .spacer { flex:1; }
    button { background: var(--primary); color: #081327; border: none; padding: 14px 22px; border-radius:12px; font-weight:700; font-size:18px; cursor:pointer; }
    button[disabled] { opacity: 0.5; cursor:not-allowed; }
    .ghost { background: transparent; color: var(--text); border: 1px solid rgba(255,255,255,0.18); }
    .meta { display:flex; align-items:center; justify-content:space-between; gap:16px; margin-top:14px; color:var(--muted); font-size:16px; }
    .bar { height:8px; width:100%; background: rgba(255,255,255,0.08); border-radius:999px; overflow:hidden; }
    .bar > span { display:block; height:100%; width:0%; background: linear-gradient(90deg,var(--accent),var(--primary)); }
    .kbhint { font-size:14px; color:var(--muted); }
    a { color:#93c5fd; text-decoration:none; }
    a:hover { text-decoration: underline; }
    @media print {
      body { background: #fff; color: #111; }
      .card { box-shadow: none; border: 1px solid #ddd; }
      .meta, .kbhint, .nav { display: none !important; }
      .deck { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="deck">
    <div class="card">
      <div>
        <h1 id="slide-title">Web Challenges Story</h1>
        <div id="slide-content" class="content"></div>
      </div>

      <div>
        <div class="meta">
          <div id="counter">1 / 23</div>
          <div class="bar"><span id="progress"></span></div>
          <div class="kbhint">Tip: ← / → to navigate • P to print</div>
        </div>

        <div class="nav">
          <button id="prev" class="ghost">◀ Previous</button>
          <div class="spacer"></div>
          <button id="next">Next ▶</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Slides: invitation + technical primer on SSTI and supporting knowledge (no exploit payloads)
    const slides = [
      {
        title: "You're Invited — PicoCTF Style",
        content: `<p>Welcome! This deck prepares you for a friendly web challenge in the PicoCTF style. We'll cover the concepts you'll need to explore a web app safely and effectively — while keeping the actual solution hidden so you can learn by doing.</p>
                  <p><strong>Call to action:</strong> Gather your browser DevTools, a proxy (Burp/ZAP optional), and curiosity. Let’s dive.</p>`
      },

      {
        title: "What you'll learn",
        content: `<ul>
                    <li>How template engines work and where they run (server vs client).</li>
                    <li>Safe ways to probe template behaviour without leaking sensitive data.</li>
                    <li>Testing techniques and defensive controls.</li>
                    <li>How the topic maps to OWASP/CWE/CVE guidance you should know.</li>
                  </ul>`
      },

      {
        title: "Quick HTTP refresher",
        content: `<ul>
                    <li>Requests: method, path, headers, body.</li>
                    <li>Responses: status, headers, body — headers like <code>Set-Cookie</code> and <code>Location</code> matter when tracing flows.</li>
                    <li>Use Network panel to watch redirects, cookies, and payloads sent to the server.</li>
                  </ul>`
      },

      {
        title: "What is a template engine?",
        content: `<p>A template engine (Jinja2, Twig, ERB, etc.) combines static templates with dynamic data on the server to produce HTML. Templates evaluate expressions and can call functions — so they are powerful.</p>
                  <p>Key idea: when user input is rendered inside a template without strict controls, it can change what the template evaluates to.</p>`
      },

      {
        title: "Server-Side Template Injection (SSTI) — concept",
        content: `<ul>
                    <li>SSTI arises when user-controlled input is treated as template code by the server.</li>
                    <li>Result: the attacker may cause the template to compute unexpected values, call functions, or access server resources.</li>
                    <li>Severity depends on the engine, server configuration, and what code/functions are available to templates.</li>
                  </ul>`
      },

      {
        title: "Why SSTI matters (high level)",
        content: `<ul>
                    <li>Can lead to information disclosure (sensitive files, configuration).</li>
                    <li>Can lead to remote code execution in some environments.</li>
                    <li>Even if full RCE isn't possible, SSTI can reveal internal structure that makes further exploitation easier.</li>
                  </ul>`
      },

      {
        title: "Safe testing principles (don't ruin the challenge)",
        content: `<ul>
                    <li>Start with harmless probes: simple arithmetic or text that demonstrates evaluation without harming the host.</li>
                    <li>Avoid destructive actions (file deletion, heavy commands). Practice restraint and learn the model instead.</li>
                    <li>Use local sandboxes to practice before trying anything against a target you don't own.</li>
                  </ul>`
      },

      {
        title: "Template engines to be familiar with",
        content: `<ul>
                    <li><b>Jinja2</b> (Python/Flask) — common in CTFs and web apps.</li>
                    <li><b>Twig</b> (PHP), <b>ERB</b> (Ruby), <b>Handlebars</b> (JS) — each has its syntax/behaviour.</li>
                    <li>Knowing the engine helps: syntax clues, available builtins, and typical server patterns.</li>
                  </ul>`
      },

      {
        title: "How to detect templates in the wild",
        content: `<ul>
                    <li>Look for rendered user input that seems evaluated rather than escaped.</li>
                    <li>Check for predictable markers in the output or the app's stack (HTTP headers, error messages).</li>
                    <li>Sometimes the app reveals the framework in an error page or in JavaScript comments.</li>
                  </ul>`
      },

      {
        title: "DevTools & quick checks",
        content: `<ul>
                    <li>Network tab: capture requests/response headers and bodies.</li>
                    <li>Application/Storage: inspect cookies and local storage values.</li>
                    <li>Console: quick helpers to decode/encode values (for example base64).</li>
                  </ul>`
      },

      {
        title: "Probing methodology (non-spoiler)",
        content: `<ol>
                    <li>Observe: where is user input shown back to you? Which parameter or field?</li>
                    <li>Probe: use harmless template expressions to confirm evaluation behaviour.</li>
                    <li>Enumerate: once you know the engine evaluates code, learn what builtin objects/functions are accessible — without performing damaging operations.</li>
                    <li>Exploit carefully: chain knowledge into a proof-of-concept that demonstrates an impact (info leak, auth bypass) without unnecessary damage.</li>
                  </ol>`
      },

      {
        title: "Common defensive patterns (what devs should do)",
        content: `<ul>
                    <li>Never render raw user input as a template — prefer template variables bound to server-side values.</li>
                    <li>Escape/sanitize user content for the target context (HTML, JS, CSS).</li>
                    <li>Use template engine sandboxes or restricted environments when available.</li>
                    <li>Avoid template features that let templates import or execute arbitrary objects/functions.</li>
                  </ul>`
      },

      {
        title: "Server side best practices",
        content: `<ul>
                    <li>Keep secret material out of templates; don't expose sensitive objects to the template context.</li>
                    <li>Log and rate-limit suspicious requests; alert on unusual template errors or stack traces.</li>
                    <li>Apply least privilege to the process running the app (file access, system commands).</li>
                  </ul>`
      },

      {
        title: "How this maps to OWASP & CWE",
        content: `<ul>
                    <li><strong>OWASP A01 / A07</strong>: Broken Access Control & Authentication issues can appear together with template flaws when developers place trust incorrectly.</li>
                    <li>CWEs such as improper authentication, reliance on client data, or unsafe use of language features are commonly relevant.</li>
                    <li>References below point to official guidance for triage and fixes.</li>
                  </ul>`
      },

      {
        title: "Tooling you'll rely on",
        content: `<ul>
                    <li><strong>Browser DevTools</strong> — first line for inspection.</li>
                    <li><strong>Burp/ZAP</strong> — intercept, modify, and replay requests.</li>
                    <li><strong>curl/httpie</strong> — scripted proofs of concept.</li>
                    <li><strong>Decoders</strong> (base64, URL) and quick REPLs to test transformations.</li>
                  </ul>`
      },

      {
        title: "Ethics & scope",
        content: `<p>Always practice within authorised scopes (CTF targets or lab environments). When working on real systems, avoid destructive actions — report issues responsibly.</p>`
      },

      {
        title: "References (CVE / OWASP / CWE)",
        content: `
          <ul>
            <li><a href="https://owasp.org/www-project-top-ten/" target="_blank" rel="noopener noreferrer">OWASP Top Ten</a></li>
            <li><a href="https://cwe.mitre.org" target="_blank" rel="noopener noreferrer">MITRE CWE Catalog</a></li>
            <li><a href="https://nvd.nist.gov" target="_blank" rel="noopener noreferrer">NVD / CVE database</a></li>
            <li>
              <strong>Payloads & testing reference (educational)</strong> —
              <a href="https://swisskyrepo.github.io/PayloadsAllTheThings/Server%20Side%20Template%20Injection/?utm_source=chatgpt.com"
                target="_blank" rel="noopener noreferrer">
                PayloadsAllTheThings: SSTI Cheatsheet
              </a>
              <div style="margin-top:8px; color:var(--muted); font-size:0.9em;">
                Note: Use payload lists for learning and local lab testing only. Avoid destructive actions on live targets.
              </div>
            </li>
          </ul>
          <p>These resources will help you map observed behaviour to risk categories and mitigations.</p>
        `
}
,

      {
        title: "Developer fixes recap",
        content: `<ul>
                    <li>Do not evaluate user input as template code.</li>
                    <li>Render user content with proper escaping and use server-side state for sensitive decisions.</li>
                    <li>Limit what template contexts can access; avoid exposing OS/file APIs or critical objects.</li>
                  </ul>`
      },

      {
        title: "How to practice safely",
        content: `<ol>
                    <li>Spin up a local app that uses a common template engine and practise with intentionally vulnerable examples.</li>
                    <li>Recreate safe, controlled scenarios before testing live CTF tasks.</li>
                    <li>Share findings as proof-of-concepts that demonstrate impact without revealing destructive details.</li>
                  </ol>`
      },

      {
        title: "Challenge overview (non-spoiler)",
        content: `<p>The CTF task you'll attempt later is intentionally focused: it's designed to teach you how template engines behave and how server trust can be misapplied.</p>
                  <p>Goal: apply the concepts above to discover a server-side misconfiguration or exposure, then produce a controlled proof-of-concept demonstrating the issue.</p>`
      },

      {
        title: "What next — a suggested playbook",
        content: `<ol>
                    <li>Explore the UI: find inputs that are reflected back in responses.</li>
                    <li>Confirm evaluation with harmless probes.</li>
                    <li>Enumerate what the template environment exposes (read-only exploration; be ethical).</li>
                    <li>Construct a minimal, non-destructive PoC that proves the issue.</li>
                  </ol>`
      },

      {
        title: "Further reading & learning paths",
        content: `<ul>
                    <li>Read OWASP pages on Injection and Broken Access Control.</li>
                    <li>Practice on deliberately vulnerable VMs/labs (e.g., WebGoat variants, Mutillidae, Juice Shop).</li>
                    <li>Review secure template usage guides for your framework (Flask/Django/PHP/etc.).</li>
                  </ul>`
      },

      {
        title: "Join the challenge — Good luck!",
        content: `<p>🎯 You now have the mental model: what template engines do, how to safely probe them, and how to think like the server. Go explore the CTF — learn, practice, and report responsibly.</p>
                  <p>Have fun — and if you want a follow-up deck that walks through safe lab examples (local only), say the word and I’ll prepare one that you can run on your machine.</p>`
      }
    ];

    let step = 0;
    const titleEl = document.getElementById('slide-title');
    const contentEl = document.getElementById('slide-content');
    const counterEl = document.getElementById('counter');
    const barEl = document.getElementById('progress');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    function render() {
      const s = slides[step];
      titleEl.innerHTML = s.title;
      contentEl.innerHTML = s.content;
      counterEl.textContent = `${step + 1} / ${slides.length}`;
      const pct = ((step + 1) / slides.length) * 100;
      barEl.style.width = pct + '%';
      prevBtn.disabled = step === 0;
      nextBtn.textContent = step === slides.length - 1 ? 'Finish' : 'Next ▶';
    }

    prevBtn.addEventListener('click', () => { if (step > 0) { step--; render(); } });
    nextBtn.addEventListener('click', () => { if (step < slides.length - 1) { step++; render(); } });

    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') { if (step > 0) { step--; render(); } }
      if (e.key === 'ArrowRight') { if (step < slides.length - 1) { step++; render(); } }
      if (e.key.toLowerCase() === 'p') { window.print(); }
    });

    render();
  </script>
</body>
</html>
