<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web Challenges Story — HTML Slides</title>
  <style>
    :root {
      --bg: #0f172a;          /* slate-900 */
      --panel: #0b1229;       /* deep navy */
      --text: #e5e7eb;        /* gray-200 */
      --muted: #9ca3af;       /* gray-400 */
      --primary: #60a5fa;     /* blue-400 */
      --accent: #34d399;      /* emerald-400 */
      --warn: #f59e0b;        /* amber-500 */
      --danger: #f87171;      /* red-400 */
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: linear-gradient(180deg, #0b1022, var(--bg));
      color: var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display: flex; align-items: center; justify-content: center; padding: 2.5vh 2vw;
    }
    .deck { width: min(1100px, 96vw); }
    .card { background: radial-gradient(1200px 600px at 100% 0%, #0e1b45 0%, var(--panel) 50%);
      border: 1px solid rgba(255,255,255,0.06); border-radius: 22px; padding: 48px 56px; box-shadow: 0 12px 40px rgba(0,0,0,0.35);
      min-height: 68vh; display: flex; flex-direction: column; justify-content: space-between; }
    h1 { font-size: clamp(28px, 4vw, 44px); margin: 0 0 18px; line-height: 1.15; letter-spacing: 0.2px; }
    .content { font-size: clamp(18px, 2.2vw, 24px); line-height: 1.6; }
    .content p { margin: 0 0 12px; }
    .content ul, .content ol { margin: 10px 0 0 0; padding-left: 26px; }
    .content li { margin: 10px 0; }
    code { background: rgba(255,255,255,0.06); padding: 2px 6px; border-radius: 6px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 0.9em; }
    pre { background: rgba(255,255,255,0.06); padding: 14px 16px; border-radius: 12px; overflow-x: auto; }

    .nav { display: flex; align-items: center; gap: 16px; margin-top: 26px; }
    .nav .spacer { flex: 1; }
    button { background: var(--primary); color: #081327; border: none; padding: 14px 22px; border-radius: 12px; font-weight: 700; font-size: 18px; cursor: pointer; }
    button[disabled] { opacity: 0.5; cursor: not-allowed; }
    .ghost { background: transparent; color: var(--text); border: 1px solid rgba(255,255,255,0.18); }

    .meta { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin-top: 14px; color: var(--muted); font-size: 16px; }
    .bar { height: 8px; width: 100%; background: rgba(255,255,255,0.08); border-radius: 999px; overflow: hidden; }
    .bar > span { display: block; height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--primary)); }

    .kbhint { font-size: 14px; color: var(--muted); }
    a { color: #93c5fd; text-decoration: none; }
    a:hover { text-decoration: underline; }

    @media print {
      body { background: #fff; color: #111; }
      .card { box-shadow: none; border: 1px solid #ddd; }
      .meta, .kbhint, .nav { display: none !important; }
      .deck { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="deck">
    <div class="card">
      <div>
        <h1 id="slide-title">Web Challenges Story</h1>
        <h2>by Bhagya Chembakottu</h2>
        <div id="slide-content" class="content"></div>
      </div>

      <div>
        <div class="meta">
          <div id="counter">1 / 23</div>
          <div class="bar"><span id="progress"></span></div>
          <div class="kbhint">Tip: ← / → to navigate • P to print</div>
        </div>
        <div class="nav">
          <button id="prev" class="ghost">◀ Previous</button>
          <div class="spacer"></div>
          <button id="next">Next ▶</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Slides: concepts first; challenge overview ONLY at the very end + wishing slide
    const slides = [
      { title: "Cast & Mission", content: `Let us master web identity & sessions before the STL CTF challenges.` },
      { title: "Learning Outcomes", content: `<ul><li>Explain HTTP + redirects.</li><li>AuthN vs AuthZ vs Session.</li><li>DevTools/Proxy skills.</li><li>Map to OWASP A01/A07 & CWEs.</li><li>Server-side enforcement & cookie hardening.</li></ul>` },
      { title: "How the Web Talks (HTTP Basics)", content: `<ul><li><b>Request line:</b> <code>POST /login HTTP/1.1</code></li><li><b>Headers</b> (e.g., <code>Content-Type</code>, <code>Cookie</code>).</li><li><b>Body</b> for POST/PUT/PATCH.</li><li><b>Response</b>: status, headers, body.</li></ul>` },
      { title: "Methods, Forms, Redirects", content: `<ul><li>GET fetches; POST submits credentials.</li><li>Login often returns 302/303 → browser follows <code>Location</code>.</li><li>Session typically begins via <code>Set-Cookie</code>.</li></ul>` },
      { title: "Cookie Primer", content: `<ul><li>Server sets via <code>Set-Cookie</code>.</li><li>Browser auto-sends cookie on matching domain/path.</li><li>Best: store only a <b>random session id</b>.</li></ul>` },
      { title: "Web Storage vs Cookies", content: `<ul><li><b>Local/SessionStorage</b> is JS-only; not auto-sent.</li><li>Great for UI state; <b>not</b> for secrets or trust.</li><li>Client data is editable by users.</li></ul>` },
      { title: "Session Management Deep Dive", content: `<ul><li>sid ↔ server store (user id, roles, expiry, CSRF).</li><li>Rotate sid on login/elevation (fixation).</li><li>Expire/invalidate on logout; short lifetime.</li></ul>` },
      { title: "AuthN vs AuthZ vs Session", content: `<ul><li><b>AuthN</b>: who you are (password/MFA/OAuth).</li><li><b>AuthZ</b>: what you can do (RBAC/ABAC/policies).</li><li><b>Session</b>: binds browser to server identity.</li><li>Bug: trusting client to do any of these.</li></ul>` },
      { title: "Threat Model: Hostile Client", content: `<ul><li>Edit cookies, storage, hidden inputs, URLs.</li><li>Replay/forge with curl/Burp/ZAP.</li><li>Decode Base64/URL; guess predictable values.</li></ul>` },
      { title: "Must‑Know Headers", content: `<ul><li><code>Set-Cookie</code>, <code>Cookie</code></li><li><code>Location</code> (redirects)</li><li><code>Cache-Control</code> (avoid caching secrets)</li><li><code>CSP</code>, <code>HSTS</code> (later)</li></ul>` },
      { title: "Tooling: DevTools", content: `<ul><li><b>Network</b>: follow login flow, inspect cookies/redirects.</li><li><b>Application/Storage</b>: view/edit Cookies & Web Storage.</li><li><b>Console</b>: try <code>atob()</code> quickly.</li></ul>` },
      { title: "Tooling: Proxies & CLI", content: `<ul><li><b>Burp/ZAP</b>: intercept & modify.</li><li><b>curl/httpie</b>: reproducible PoC.<br><code>curl -i -H "Cookie: sid=ABC" https://site/profile</code></li></ul>` },
      { title: "Encoding & Decoding 101", content: `<ul><li>URL‑encoding: <code>%3D</code> → <code>=</code></li><li>Base64: <code>YWRtaW4=</code> → <code>admin</code> (not encryption)</li><li>Tools: CyberChef / <code>base64 -d</code> / <code>atob()</code>.</li></ul>` },
      { title: "OWASP Top 10 Map", content: `<ul><li><b>A07</b>: Identification & Authentication Failures.</li><li><b>A01</b>: Broken Access Control.</li><li>Cookie flags/session relate to both.</li></ul><p>See <a href="https://owasp.org/www-project-top-ten/" target="_blank">OWASP Top Ten</a></p>` },
      { title: "CWE Map (shared language)", content: `<ul><li><b>CWE‑287</b>: Improper Authentication.</li><li><b>CWE‑565/472/784</b>: Trusting client cookies/params.</li><li><b>CWE‑384</b>: Session Fixation.</li><li><b>CWE‑1275</b>: Improper SameSite.</li></ul><p>See <a href="https://cwe.mitre.org" target="_blank">MITRE CWE</a></p>` },
      { title: "Vuln: Improper Authentication", content: `<ul><li>Server accepts identity without solid verification.</li><li>Example: trusting hidden field or <code>username</code> cookie.</li><li>Impact: bypass/impersonation (A07/CWE‑287).</li></ul>` },
      { title: "Vuln: Cookie Tampering", content: `<ul><li>AuthZ by client-held value (<code>role=admin</code>).</li><li>Edit → escalate privileges.</li><li>Map: A01/A07; CWE‑565/472/784.</li></ul>` },
      { title: "Vuln: Session Fixation", content: `<ul><li>Attacker sets/forces known sid; victim logs in.</li><li>Attacker reuses sid to hijack.</li><li>Defense: regenerate on login; flags (CWE‑384).</li></ul>` },
      { title: "Cookie Hardening", content: `<ul><li><b>HttpOnly</b>: JS can’t read (mitigate theft).</li><li><b>Secure</b>: HTTPS only.</li><li><b>SameSite</b>: mitigate CSRF (<code>Lax</code>/<code>Strict</code>).</li></ul><pre><code>Set-Cookie: sid=abc123; Path=/; HttpOnly; Secure; SameSite=Lax</code></pre>` },
      { title: "Exploitation Playbook", content: `<ol><li>Trace login → check <code>Set-Cookie</code> & redirects.</li><li>Inspect storage → tweak values → reload.</li><li>Decode if opaque.</li><li>PoC with Burp/<code>curl</code>.</li></ol>` },
      { title: "Mitigation Playbook", content: `<ul><li>Server-side checks on every sensitive route.</li><li>Cookie holds only random sid; roles server-side.</li><li>Rotate sid on login/elevation; expire on logout.</li><li>Log anomalies.</li></ul>` },
      { title: "References (CVE/Articles)", content: `<ul><li><a target="_blank" href="https://nvd.nist.gov/vuln/detail/CVE-2023-25556">NVD entry (CWE‑287)</a></li><li><a target="_blank" href="https://cwe.mitre.org/data/definitions/565.html">CWE‑565 Reliance on Cookies</a></li><li><a target="_blank" href="https://owasp.org/Top10/A01_2021-Broken_Access_Control/">OWASP A01</a></li><li><a target="_blank" href="https://owasp.org/Top10/A07_2021-Identification_and_Authentication_Failures/">OWASP A07</a></li></ul>` },
      { title: "Instructor Flow (optional)", content: `<ol><li>Intro → live DevTools demo.</li><li>Practice decoding.</li><li>Show hardening; verify fix blocks PoC.</li></ol>` },
      { title: "Challenge Overview (final)", content: `<p>Now that you have the model, here’s what’s coming:</p><ul><li><b>Login Mystery</b>: an app that accidentally trusts client hints about identity.</li><li><b>Cookie Monster</b>: privileges controlled by a cookie value.</li></ul><p>These are intentionally simple so you can focus on <i>thinking like the server</i>.</p>` },
      { title: "What You Might Use", content: `<ul><li>DevTools → Network & Application/Storage.</li><li>Burp/ZAP to intercept/modify requests.</li><li>Decoders: URL & Base64 (CyberChef, <code>atob()</code>).</li><li><b>Mental model</b>: client is editable; server is the source of truth.</li></ul>` },
      { title: "Good Luck!", content: `<p>🎯 Spot one client‑side value that should be server‑side truth, and fix it.<br>🌟 You’ve got the tools, the map (OWASP/CWE), and the mindset. Go ship something safer.</p>` },
    ];

    let step = 0;
    const titleEl = document.getElementById('slide-title');
    const contentEl = document.getElementById('slide-content');
    const counterEl = document.getElementById('counter');
    const barEl = document.getElementById('progress');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    function render() {
      const s = slides[step];
      titleEl.innerHTML = s.title;
      contentEl.innerHTML = s.content;
      counterEl.textContent = `${step + 1} / ${slides.length}`;
      const pct = ((step + 1) / slides.length) * 100;
      barEl.style.width = pct + '%';
      prevBtn.disabled = step === 0;
      nextBtn.textContent = step === slides.length - 1 ? 'Finish' : 'Next ▶';
    }

    prevBtn.addEventListener('click', () => { if (step > 0) { step--; render(); } });
    nextBtn.addEventListener('click', () => { if (step < slides.length - 1) { step++; render(); } });

    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') { if (step > 0) { step--; render(); } }
      if (e.key === 'ArrowRight') { if (step < slides.length - 1) { step++; render(); } }
      if (e.key.toLowerCase() === 'p') { window.print(); }
    });

    render();
  </script>
</body>
</html>